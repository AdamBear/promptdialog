<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>本地化部署 | Prompt AI帮助文档</title><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="本地化部署" /><meta property="og:locale" content="en_US" /><meta name="description" content="How to use Prompt AI to solve and promote your business" /><meta property="og:description" content="How to use Prompt AI to solve and promote your business" /><link rel="canonical" href="http://0.0.0.0:4000/docs/zh/private_deploy/" /><meta property="og:url" content="http://0.0.0.0:4000/docs/zh/private_deploy/" /><meta property="og:site_name" content="Prompt AI帮助文档" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="本地化部署" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"How to use Prompt AI to solve and promote your business","headline":"本地化部署","url":"http://0.0.0.0:4000/docs/zh/private_deploy/"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>搜索</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://0.0.0.0:4000/" class="site-title lh-tight"> 帮助文档 </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="http://0.0.0.0:4000/docs/zh/about/" class="nav-list-link">关于</a><li class="nav-list-item"><a href="http://0.0.0.0:4000/docs/zh/appendix/appendix/" class="nav-list-link">概念说明</a><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/tutorial/" class="nav-list-link">开发指南</a><ul class="nav-list "><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/project/01-create-project/" class="nav-list-link">创建项目</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/project/02-overview-project/" class="nav-list-link">项目概览</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/faq/01-create-faq/" class="nav-list-link">创建用户问答（FAQ）</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/flow/01-create-flow/" class="nav-list-link">创建对话流图</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/flow_and_faq/01-flow-and-faq/" class="nav-list-link">对话流图与用户问答（FAQ）</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/flow/02-create-complex-flow/" class="nav-list-link">创建复杂对话流图</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/flow/03-train-project/" class="nav-list-link">调试对话流图</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/flow/04-publish-project/" class="nav-list-link">发布项目</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/webhook/01-webhook/" class="nav-list-link">webhook概念说明</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/webhook/02-webhook/" class="nav-list-link">webhook示例</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/setting/" class="nav-list-link">配置说明</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/node-template/bot-global/" class="nav-list-link">创建回答列表</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/node-template/user-global/" class="nav-list-link">创建意图列表</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/form/01-form/" class="nav-list-link">创建信息收集（Form）</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/trash/01-trash/" class="nav-list-link">回收站</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/redo_undo/01-index/" class="nav-list-link">撤销/重做</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/entity/01-dictionary/" class="nav-list-link">变量-热词</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/favorite/01-favorite/" class="nav-list-link">收藏夹</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/synonym/01-synonym/" class="nav-list-link">同义词</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/tutorial/copy/01-paste/" class="nav-list-link">复制节点</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/example/" class="nav-list-link">示例</a><ul class="nav-list "><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/example/faq-flow/" class="nav-list-link">简单问答（FAQ）和对话流图</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/example/form/" class="nav-list-link">信息表单</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/example/slot/" class="nav-list-link">变量提取</a><li class="nav-list-item "><a href="http://0.0.0.0:4000/docs/zh/example/trash/" class="nav-list-link">回收站</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/faq/" class="nav-list-link">常见问题</a><ul class="nav-list "></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/release/" class="nav-list-link">发布</a><ul class="nav-list "></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/local_install/" class="nav-list-link">本地安装</a><ul class="nav-list "></ul><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/private_deploy/" class="nav-list-link active">本地化部署</a><ul class="nav-list "></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://0.0.0.0:4000/docs/zh/study_rasa/" class="nav-list-link">RASA学习</a><ul class="nav-list "></ul></ul></nav><footer class="site-footer"> Copyright &copy; 2022 <a href="https://www.promptai.cn">Prompt AI</a></footer></div><div class="main" id="top"><div id="main-header" class="main-header"><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://www.promptai.cn" class="site-button" > Prompt AI </a></ul></nav><div class="language"><a href="/docs/en" class="language-link" rel="noopener noreferrer">English</a></div></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><h1 class="no_toc header" id="本地化部署"> <a href="#本地化部署" class="anchor-heading" aria-labelledby="本地化部署"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 本地化部署</h1><hr /><p>如果你需要将服务部署到自己的私有服务器或者本地，可以参考如下教程。</p><h2 id="获取最新镜像"> <a href="#获取最新镜像" class="anchor-heading" aria-labelledby="获取最新镜像"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 获取最新镜像</h2><p>通过如下命令获取最新安装镜像。获取最新镜像前，请您确认<a href="https://docs.docker.com/get-docker/">已经安装最新docker服务</a></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull registry.cn-chengdu.aliyuncs.com/zpcloud/zbot-aio:latest
</code></pre></div></div><h2 id="启动容器"> <a href="#启动容器" class="anchor-heading" aria-labelledby="启动容器"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 启动容器</h2><h3 id="不使用gpu启动服务"> <a href="#不使用gpu启动服务" class="anchor-heading" aria-labelledby="不使用gpu启动服务"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 不使用GPU启动服务</h3><p>获取最新镜像后，如果不使用GPU可以通过下面命令启动服务</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 不使用GPU</span>

docker run <span class="nt">--name</span> zbot <span class="nt">--add-host</span><span class="o">=</span>host.docker.internal:host-gateway <span class="nt">-v</span> /usr/local/zbot/.promptai/:/usr/local/zbot/.promptai/:rw <span class="nt">-v</span> /var/run/docker.sock:/var/run/docker.sock  <span class="nt">-v</span> &lt;host-path-log&gt;:/data/logs <span class="nt">-v</span> &lt;host-path-mysql&gt;:/data/mysql <span class="nt">-v</span> &lt;host-path-mongo&gt;:/data/mongo <span class="nt">-v</span> &lt;host-path-p8s&gt;:/data/minimalzp/p8s <span class="nt">-p</span> hostport:80  registry.cn-chengdu.aliyuncs.com/zpcloud/zbot-aio:latest


</code></pre></div></div><p><br />说明：</p><ul><li><code class="language-plaintext highlighter-rouge">/var/run/docker.sock</code>:docker通讯文件（服务与docker通讯，对模型容器进行管理）。<li><code class="language-plaintext highlighter-rouge">/usr/local/zbot/.promptai/</code>：训练文件缓存目录，需要与后面的映射目录一致，如果需要修改需要在启动命令添加参数<code class="language-plaintext highlighter-rouge">-e ai.base.dir=&lt;path&gt; -v &lt;path&gt;:&lt;path&gt;</code>，<code class="language-plaintext highlighter-rouge">&lt;path&gt;</code>为你需要修改的目录<li><code class="language-plaintext highlighter-rouge">&lt;host-path-log&gt;</code>：日志保存目录<li><code class="language-plaintext highlighter-rouge">&lt;host-path-mysql&gt;</code>：mysql数据文件目录<li><code class="language-plaintext highlighter-rouge">&lt;host-path-mongo&gt;</code>：mongodb数据文件目录<li><code class="language-plaintext highlighter-rouge">&lt;host-path-p8s&gt;</code>：minimalzp数据目录<li><code class="language-plaintext highlighter-rouge">hostport</code>:服务暴露端口，不能被其它程序占用</ul><h3 id="使用gpu启动服务"> <a href="#使用gpu启动服务" class="anchor-heading" aria-labelledby="使用gpu启动服务"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 使用GPU启动服务</h3><p>如果需要使用GPU请首先安装好GPU驱动程序，目前仅支持<code class="language-plaintext highlighter-rouge">nvidia</code>显卡，<a href="https://nvidia.github.io/nvidia-container-runtime/">驱动下载链接</a></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 查看驱动是否正常 </span>
nvidia-smi
</code></pre></div></div><p>驱动安装正常后如图所示 <img src="/assets/images/private_deploy/deploy-03.png" alt="deploy-03" /></p><p>启动服务，并且使用GPU。默认使用当前电脑的所有GPU，如果你需要指定GPU<a href="https://docs.docker.com/engine/reference/commandline/run/#access-an-nvidia-gpu">请参考文档</a></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 使用GPU</span>

docker run <span class="nt">--name</span> zbot <span class="nt">--add-host</span><span class="o">=</span>host.docker.internal:host-gateway <span class="nt">-v</span> /usr/local/zbot/.promptai/:/usr/local/zbot/.promptai/:rw <span class="nt">-v</span> /var/run/docker.sock:/var/run/docker.sock  <span class="nt">-v</span> &lt;host-path-log&gt;:/data/logs <span class="nt">-v</span> &lt;host-path-mysql&gt;:/data/mysql <span class="nt">-v</span> &lt;host-path-mongo&gt;:/data/mongo <span class="nt">-v</span> &lt;host-path-p8s&gt;:/data/minimalzp/p8s <span class="nt">-p</span> hostport:80 <span class="nt">--gpus</span> all registry.cn-chengdu.aliyuncs.com/zpcloud/zbot-aio:latest

</code></pre></div></div><h3 id="安装完成"> <a href="#安装完成" class="anchor-heading" aria-labelledby="安装完成"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装完成</h3><p>命令执行完成后，我们可以看到地址、账号、密码信息，如图所示：</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 通过查看容器的日志，判断服务是否启动成功</span>

docker logs <span class="nt">-f</span> zbot
</code></pre></div></div><p><img src="/assets/images/private_deploy/deploy-01.png" alt="deploy-01" /></p><h3 id="登录体验"> <a href="#登录体验" class="anchor-heading" aria-labelledby="登录体验"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 登录体验</h3><p>使用安装完成后显示的地址、账号、密码即可开启体验，如图所示： <img src="/assets/images/private_deploy/deploy-02.png" alt="deploy-02" /></p><p><br />备注：默认的初始登录账号/密码:admin@promptai.local/promptai，但是请以服务安装完成后的显示为准</p><h2 id="说明"> <a href="#说明" class="anchor-heading" aria-labelledby="说明"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 说明</h2><h3 id="模型容器"> <a href="#模型容器" class="anchor-heading" aria-labelledby="模型容器"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 模型容器</h3><p>当我们进行项目调试及发布的时候，系统会根据发布的项目来创建（通过启动新的docker容器）对应的模型容器，每一个发布的项目都会对应一个模型容器， 一个账号下所有调试的项目对应同一个模型容器。 <img src="/assets/images/private_deploy/deploy-04.png" alt="deploy-04" /></p><h3 id="启动时间"> <a href="#启动时间" class="anchor-heading" aria-labelledby="启动时间"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 启动时间</h3><p>第一次启动会消耗较长时间，因为此时系统将pull容器的docker image（此过程自动发生），请耐心等待。</p><h2 id="获取帮助"> <a href="#获取帮助" class="anchor-heading" aria-labelledby="获取帮助"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 获取帮助</h2><p>请扫码加入微信群里获取帮助，微信二维码在登录系统后右上角查看。</p><hr><h2 class="text-delta">继续阅读</h2><ul></ul><hr><footer><p><a href="#top" id="back-to-top">回到顶部</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2022 <a href="https://www.promptai.cn">Prompt AI</a> Powered By <a href="https://www.zervice.cn">Zervice</a></p><div class="d-flex mt-2"></div></footer></div></div></div>
